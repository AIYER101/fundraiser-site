<!-- total.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Challenge Complete â€” Chilli Challenge</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<div class="nav">
  <div class="container nav-inner">
    <div class="badge">KPMG Ã— ACT Wildlife</div>
    <div class="nav-links">
      <a class="pill" href="index.html">Home</a>
      <a class="pill" href="donate.html">Donate</a>
      <a class="pill" href="total.html">Live Total</a>
    </div>
  </div>
</div>

<div class="container">

  <section class="hero" style="min-height:280px">
    <img src="chilli.jpg" alt="Chilli background" />
    <div class="hero-content">
      <div class="kicker">Final Total</div>
      <div class="h1">Chilli Challenge Complete! ğŸŒ¶ï¸ğŸ”¥</div>
      <p class="lede">The challenge has concluded with the Carolina Reaper!</p>
      <span class="badge" id="status" style="margin-top:10px">loadingâ€¦</span>
    </div>
  </section>

  <div class="card" style="margin-top:14px">
    <h2>Thank You! ğŸ™</h2>
    <p class="muted">
      A huge thank you to all donors and everyone who participated in this fundraiser!
      Your generosity has made a real difference for ACT Wildlife and the animals they care for.
    </p>
    <p class="muted" style="margin-top:14px">
      The chilli challenge has officially concluded, and our brave organisers will be eating the
      <b>Carolina Reaper</b> â€” one of the world's hottest peppers at 1,500,000 Scoville units!
    </p>
  </div>

  <div class="grid" style="margin-top:14px">
    <div class="card">
      <h2>Final Total Raised</h2>
      <div class="muted">Last updated</div>
      <div style="font-weight:800;margin-top:6px" id="updated">â€”</div>

      <div class="muted" style="margin-top:14px">Total raised</div>
      <div class="big-number" id="total">$0</div>
      
      <div class="muted" style="margin-top:14px">
        Thank you for your incredible support!
      </div>
    </div>

    <div class="card">
      <h2>Final Pepper: Carolina Reaper</h2>
      <img src="photos/Carolina-Reaper-1024x768.jpg" alt="Carolina Reaper" style="width:100%;max-height:300px;object-fit:cover;border-radius:8px;margin-top:8px;margin-bottom:12px" />
      <div style="font-size:36px;font-weight:900;margin-top:8px">Carolina Reaper</div>
      <div style="margin-top:8px;font-size:14px;color:rgba(255,255,255,0.7)">
        Certified super-hot, you need a death wish to even attempt eating this one.
      </div>
      <div class="muted" style="margin-top:6px">
        Scoville: <b>1,500,000</b>
      </div>
    </div>
  </div>

  <div class="card" style="margin-top:14px">
    <h2>Join Us Today!</h2>
    <p class="muted">
      The chilli eating and ACT Wildlife presentation will take place today:
    </p>
    <div style="margin-top:14px">
      <div style="font-size:22px;font-weight:900">ğŸ“ Level 8</div>
      <div style="font-size:22px;font-weight:900;margin-top:8px">ğŸ•“ 4:00 PM â€” January 30, 2026</div>
    </div>
    <p class="muted" style="margin-top:14px">
      Come watch the brave souls take on the Carolina Reaper and learn more about the amazing work
      ACT Wildlife does for our native animals!
    </p>
  </div>

  <footer>Â© KPMG Ã— ACT Wildlife Fundraiser</footer>
</div>

<script>
  const REFRESH_MS = 15000;

  const fmtAUD = new Intl.NumberFormat("en-AU", { style:"currency", currency:"AUD", maximumFractionDigits: 0 });

  function setStatus(txt){ document.getElementById("status").textContent = txt; }

  async function fetchTotal(){
    const res = await fetch("./total.json?cb=" + Date.now(), { cache:"no-store" });
    if (!res.ok) throw new Error("Could not load total.json");
    return await res.json();
  }

  async function update(){
    setStatus("updatingâ€¦");
    const data = await fetchTotal();
    const total = Number(data.total || 0);

    document.getElementById("total").textContent = fmtAUD.format(total);

    const stamp = data.lastUpdated
      ? new Date(data.lastUpdated).toLocaleString("en-AU")
      : new Date().toLocaleString("en-AU");
    document.getElementById("updated").textContent = stamp;

    setStatus("live");
  }

  update().catch(err => { console.error(err); setStatus("error"); });
  setInterval(() => update().catch(err => { console.error(err); setStatus("error"); }), REFRESH_MS);
</script>

</body>
</html>
